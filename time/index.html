<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>北京时间</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
html,body{height:100%;width:100%;}
body{
  font-family:"Noto Sans SC",sans-serif;
  background:#000;
  color:#ccc;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  padding:2vw;
}
.date{font-weight:300;margin-bottom:1vh;font-size:clamp(1.5rem,5vw,4rem);}
.time{font-weight:700;margin-bottom:2vh;font-size:clamp(5rem,15vw,20rem);}
.week{font-weight:400;margin-bottom:3vh;color:#bbb;font-size:clamp(1.2rem,4vw,3rem);}
.footer{position:fixed;bottom:1vh;width:100%;text-align:center;color:#888;font-size:clamp(0.8rem,3vw,1.5rem);}
</style>
</head>
<body>
<div class="date" id="date">加载中...</div>
<div class="time" id="time">--:--:--</div>
<div class="week" id="week">星期--</div>
<div class="footer" id="src">时间来源：本地</div>

<script>
const TIME_API = 'https://timeapi.io/api/Time/current/zone?timeZone=Asia/Shanghai';
let networkOffset = 0;

const dEl=document.getElementById('date'),
      tEl=document.getElementById('time'),
      wEl=document.getElementById('week'),
      srcEl=document.getElementById('src');

// 每秒更新显示
function tick(){
  const now = Date.now() + networkOffset;
  const d = new Date(now);
  const y=d.getFullYear(), m=d.getMonth()+1, day=d.getDate();
  const hh=d.getHours().toString().padStart(2,'0'),
        mm=d.getMinutes().toString().padStart(2,'0'),
        ss=d.getSeconds().toString().padStart(2,'0');
  const weekday=['日','一','二','三','四','五','六'][d.getDay()];
  dEl.textContent=`${y}年${m}月${day}日`;
  tEl.textContent=`${hh}:${mm}:${ss}`;
  wEl.textContent=`星期${weekday}`;
}

// 初始化时间
function initTime(){
  tick(); // 先显示本地时间
  srcEl.textContent='时间来源：本地';

  // 后台获取网络时间，计算偏差
  fetch(TIME_API)
    .then(res=>res.json())
    .then(data=>{
      if(data?.time){
        const networkTime = new Date(data.time).getTime();
        networkOffset = networkTime - Date.now();
        srcEl.textContent='时间来源：网络';
      }
    })
    .catch(()=>{
      // 网络失败继续用本地时间
      srcEl.textContent='时间来源：本地';
    });
}

// 启动
initTime();
setInterval(tick,1000);
</script>
</body>
</html>
